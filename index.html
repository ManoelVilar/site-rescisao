<!DOCTYPE html>
<html lang="pt-BR">
<head> 
  //google ads
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2508393078000243"
     crossorigin="anonymous"></script>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ferramentas Trabalhistas</title>
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: url('FUNDOTRABALHO.jpg') no-repeat center center fixed;
      background-size: cover;
    }
    .container {
      max-width: 800px;
      margin: auto;
      margin-top: 30px;
      background-color: #ffffffdd;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 15px rgba(0, 0, 0, 0.3);
    }
    h2 { text-align: center; color: #333; }
    .tab-container {
      display: flex;
      margin-bottom: 20px;
    }
    .tab {
      padding: 10px 20px;
      cursor: pointer;
      background-color: #f1f1f1;
      border: none;
      border-radius: 5px 5px 0 0;
      margin-right: 5px;
    }
    .tab.active {
      background-color: #007bff;
      color: white;
    }
    .tab-content {
      display: none;
    }
    .tab-content.active {
      display: block;
    }
    label {
      font-weight: bold;
      display: block;
      margin-top: 15px;
    }
    input, select, button, textarea {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }
    button {
      background-color: #007bff;
      color: white;
      font-weight: bold;
      border: none;
      margin-top: 20px;
      cursor: pointer;
    }
    button:hover {
      background-color: #0056b3;
    }
    #resultado, #curriculoResultado { 
      margin-top: 20px;
      padding: 15px;
      background-color: #f9f9f9;
      border-radius: 5px;
    }
    .info-icon {
      cursor: help;
      color: #007bff;
      margin-left: 5px;
    }
    .tooltip {
      display: none;
      background-color: #333;
      color: #fff;
      padding: 5px 10px;
      border-radius: 5px;
      margin-top: 5px;
      font-size: 14px;
    }
    @media (max-width: 600px) {
      .container { margin: 10px; }
      .tab-container { flex-wrap: wrap; }
      .tab { margin-bottom: 5px; }
    }
    .curriculo-preview {
      background: white;
      padding: 20px;
      border: 1px solid #ddd;
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>Ferramentas Trabalhistas</h2>
    
    <div class="tab-container">
      <button class="tab active" onclick="openTab('simulador')">Simulador de Rescis√£o</button>
      <button class="tab" onclick="openTab('curriculo')">Gerador de Curr√≠culo</button>
    </div>
    
    <!-- SIMULADOR DE RESCIS√ÉO -->
    <div id="simulador" class="tab-content active">
      <h3>Simulador de Rescis√£o de Contrato</h3>

      <label>Nome do trabalhador:</label>
      <input type="text" id="nome" required />

      <label>Sal√°rio bruto (R$):</label>
      <input type="number" id="salario" min="0" step="0.01" required />

      <label>Data de admiss√£o:</label>
      <input type="date" id="admissao" required />

      <label>Data de desligamento:</label>
      <input type="date" id="desligamento" required />

      <label>J√° tirou f√©rias?
        <span class="info-icon" onmouseover="showTooltip('feriasTooltip')" onmouseout="hideTooltip('feriasTooltip')">‚ÑπÔ∏è</span>
        <div id="feriasTooltip" class="tooltip">Informe se j√° usufruiu das f√©rias neste per√≠odo trabalhado</div>
      </label>
      <select id="tirouFerias">
        <option value="nao">N√£o</option>
        <option value="sim">Sim</option>
      </select>

      <label>N√∫mero de filhos:</label>
      <input type="number" id="filhos" min="0" />

      <label>Motivo da dispensa:
        <span class="info-icon" onmouseover="showTooltip('motivoTooltip')" onmouseout="hideTooltip('motivoTooltip')">‚ÑπÔ∏è</span>
        <div id="motivoTooltip" class="tooltip">Selecione o motivo conforme sua situa√ß√£o</div>
      </label>
      <select id="motivo">
        <option value="sem_justa_causa">Sem justa causa</option>
        <option value="com_justa_causa">Com justa causa</option>
        <option value="pedido_demissao">Pedido de demiss√£o</option>
        <option value="acordo">Acordo entre as partes</option>
      </select>

      <label>Aviso pr√©vio indenizado?</label>
      <select id="aviso">
        <option value="sim">Sim</option>
        <option value="nao">N√£o</option>
      </select>

      <button onclick="validarEcalcular()">Calcular Rescis√£o</button>
      <button onclick="compartilharWhatsApp()">Compartilhar no WhatsApp</button>
      <button onclick="exportarParaPDF('resultado')">Exportar para PDF</button>

      <div id="resultado"></div>
    </div>
    
    <!-- GERADOR DE CURR√çCULO -->
    <div id="curriculo" class="tab-content">
      <h3>Gerador de Curr√≠culo</h3>
      
      <label>Nome Completo:</label>
      <input type="text" id="curriculoNome" required>
      
      <label>Profiss√£o/Cargo Desejado:</label>
      <input type="text" id="curriculoProfissao" required>
      
      <label>E-mail:</label>
      <input type="email" id="curriculoEmail" required>
      
      <label>Telefone:</label>
      <input type="tel" id="curriculoTelefone" required>
      
      <label>Endere√ßo:</label>
      <input type="text" id="curriculoEndereco">
      
      <label>Resumo Profissional:</label>
      <textarea id="curriculoResumo" rows="3"></textarea>
      
      <label>Experi√™ncia Profissional:</label>
      <textarea id="curriculoExperiencia" rows="5" placeholder="Empresa, cargo, per√≠odo e atividades desenvolvidas (separar cada experi√™ncia com ponto e v√≠rgula)"></textarea>
      
      <label>Forma√ß√£o Acad√™mica:</label>
      <textarea id="curriculoFormacao" rows="3" placeholder="Institui√ß√£o, curso, per√≠odo (separar cada forma√ß√£o com ponto e v√≠rgula)"></textarea>
      
      <label>Cursos Complementares:</label>
      <textarea id="curriculoCursos" rows="3" placeholder="Nome do curso, institui√ß√£o, ano (separar cada curso com ponto e v√≠rgula)"></textarea>
      
      <label>Habilidades:</label>
      <textarea id="curriculoHabilidades" rows="3" placeholder="Liste suas principais habilidades"></textarea>
      
      <button onclick="gerarCurriculo()">Gerar Curr√≠culo</button>
      <button onclick="exportarParaPDF('curriculoResultado')">Exportar para PDF</button>
      
      <div id="curriculoResultado" class="curriculo-preview"></div>
    </div>
  </div>

  <script>
  // Fun√ß√µes para controle das abas
  function openTab(tabName) {
    const tabs = document.querySelectorAll('.tab-content');
    tabs.forEach(tab => tab.classList.remove('active'));
    
    const tabButtons = document.querySelectorAll('.tab');
    tabButtons.forEach(button => button.classList.remove('active'));
    
    document.getElementById(tabName).classList.add('active');
    event.currentTarget.classList.add('active');
  }

  // Fun√ß√µes para tooltips
  function showTooltip(id) {
    document.getElementById(id).style.display = 'block';
  }

  function hideTooltip(id) {
    document.getElementById(id).style.display = 'none';
  }

  // Valida√ß√£o antes do c√°lculo
  function validarEcalcular() {
    const camposObrigatorios = ['nome', 'salario', 'admissao', 'desligamento'];
    let valido = true;
    
    camposObrigatorios.forEach(id => {
      const campo = document.getElementById(id);
      if (!campo.value) {
        campo.style.borderColor = 'red';
        valido = false;
      } else {
        campo.style.borderColor = '#ccc';
      }
    });
    
    if (valido) {
      calcular();
    } else {
      alert('Por favor, preencha todos os campos obrigat√≥rios!');
    }
  }

  // Fun√ß√µes do simulador de rescis√£o (mantidas do c√≥digo original)
  function calcularMeses(admissao, desligamento) {
    let anos = desligamento.getFullYear() - admissao.getFullYear();
    let meses = desligamento.getMonth() - admissao.getMonth();
    let total = anos * 12 + meses;
    if (desligamento.getDate() < admissao.getDate()) total -= 1;
    return total < 0 ? 0 : total;
  }

  function calcularMesesProporcionais(inicio, fim) {
    let meses = 0;
    const data = new Date(inicio.getFullYear(), inicio.getMonth(), 1);
    while (data <= fim) {
      const ultimoDia = new Date(data.getFullYear(), data.getMonth() + 1, 0).getDate();
      const diasNoMes = (data.getMonth() === fim.getMonth() && data.getFullYear() === fim.getFullYear())
        ? fim.getDate()
        : ultimoDia;
      if (diasNoMes >= 15) meses++;
      data.setMonth(data.getMonth() + 1);
    }
    return meses;
  }

  function calcular() {
    const nome = document.getElementById('nome').value;
    const salario = parseFloat(document.getElementById('salario').value);
    const admissao = new Date(document.getElementById('admissao').value);
    const desligamento = new Date(document.getElementById('desligamento').value);
    const tirouFerias = document.getElementById('tirouFerias').value;
    const filhos = parseInt(document.getElementById('filhos').value) || 0;
    const motivo = document.getElementById('motivo').value;
    const aviso = document.getElementById('aviso').value;

    const mesesTrabalhados = calcularMeses(admissao, desligamento);

    const diasTrabalhados = desligamento.getDate();
    const saldoSalario = (salario / 30) * diasTrabalhados;

    const inicioAno = new Date(desligamento.getFullYear(), 0, 1);
    const inicio13 = admissao > inicioAno ? admissao : inicioAno;
    const meses13 = calcularMesesProporcionais(inicio13, desligamento);
    const decimo = motivo !== "com_justa_causa" ? (salario / 12) * meses13 : 0;

    // F√©rias proporcionais apenas para o ano vigente
    let mesesFerias = 0;
    if (motivo !== "com_justa_causa") {
      const inicioFeriasAno = new Date(desligamento.getFullYear(), 0, 1);
      const inicioValido = admissao > inicioFeriasAno ? admissao : inicioFeriasAno;
      mesesFerias = calcularMesesProporcionais(inicioValido, desligamento);
    }
    const ferias = (salario / 12) * mesesFerias;
    const umTercoFerias = ferias / 3;

    const fgts = salario * 0.08 * mesesTrabalhados;
    let multaFgts = 0;
    if (motivo === "sem_justa_causa") multaFgts = fgts * 0.4;
    if (motivo === "acordo") multaFgts = fgts * 0.2;

    const avisoPrevio = aviso === "sim" && motivo !== "com_justa_causa" ? salario : 0;
    const bonusFilhos = filhos * 50;
    const inss = salario * 0.08;
    const ir = salario > 2112 ? salario * 0.075 : 0;

    const total = saldoSalario + ferias + umTercoFerias + decimo + avisoPrevio + multaFgts + bonusFilhos - inss - ir;

    // Hist√≥rico
    let historico = JSON.parse(localStorage.getItem('historicoRescisoes')) || [];
    historico.push({
      nome,
      data: new Date().toLocaleString('pt-BR'),
      total: total.toFixed(2)
    });
    localStorage.setItem('historicoRescisoes', JSON.stringify(historico));

    let htmlHistorico = "<h3>üìú Hist√≥rico de Simula√ß√µes</h3>";
    historico.slice(-5).reverse().forEach(item => {
      htmlHistorico += `<p><strong>${item.nome}</strong> - ${item.data} - R$ ${item.total}</p>`;
    });

    document.getElementById('resultado').innerHTML = `
      <hr>
      <h4>Detalhamento da Rescis√£o</h4>
      <p><strong>Trabalhador:</strong> ${nome}</p>
      <p><strong>Tempo de trabalho:</strong> ${mesesTrabalhados} m√™s(es)</p>
      
      <h5>Valores a Receber</h5>
      <p>Saldo de sal√°rio (${diasTrabalhados} dias): <strong>R$ ${saldoSalario.toFixed(2)}</strong></p>
      <p>F√©rias proporcionais (${mesesFerias} meses): <strong>R$ ${ferias.toFixed(2)}</strong></p>
      <p>1/3 de f√©rias: <strong>R$ ${umTercoFerias.toFixed(2)}</strong></p>
      <p>13¬∫ proporcional (${meses13} meses): <strong>R$ ${decimo.toFixed(2)}</strong></p>
      <p>Aviso pr√©vio: <strong>R$ ${avisoPrevio.toFixed(2)}</strong></p>
      <p>B√¥nus por filhos: <strong>R$ ${bonusFilhos.toFixed(2)}</strong></p>
      
      <h5>FGTS</h5>
      <p>FGTS acumulado (8%/m√™s): <strong>R$ ${fgts.toFixed(2)}</strong></p>
      <p>Multa FGTS: <strong>R$ ${multaFgts.toFixed(2)}</strong></p>
      
      <h5>Descontos</h5>
      <p>INSS: <strong>R$ ${inss.toFixed(2)}</strong></p>
      <p>IR: <strong>R$ ${ir.toFixed(2)}</strong></p>
      
      <hr>
      <h4>Total l√≠quido estimado: R$ ${total.toFixed(2)}</h4>
      ${htmlHistorico}
    `;
  }

  function compartilharWhatsApp() {
    const texto = document.getElementById('resultado').innerText;
    const url = `https://wa.me/?text=${encodeURIComponent(texto)}`;
    window.open(url, '_blank');
  }

  // Fun√ß√µes do gerador de curr√≠culo
  function gerarCurriculo() {
    const nome = document.getElementById('curriculoNome').value;
    const profissao = document.getElementById('curriculoProfissao').value;
    const email = document.getElementById('curriculoEmail').value;
    const telefone = document.getElementById('curriculoTelefone').value;
    const endereco = document.getElementById('curriculoEndereco').value;
    const resumo = document.getElementById('curriculoResumo').value;
    
    const experiencias = document.getElementById('curriculoExperiencia').value
      .split(';').filter(item => item.trim() !== '');
    
    const formacoes = document.getElementById('curriculoFormacao').value
      .split(';').filter(item => item.trim() !== '');
    
    const cursos = document.getElementById('curriculoCursos').value
      .split(';').filter(item => item.trim() !== '');
    
    const habilidades = document.getElementById('curriculoHabilidades').value
      .split(',').filter(item => item.trim() !== '');

    let html = `
      <div style="font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto;">
        <header style="text-align: center; margin-bottom: 20px; border-bottom: 2px solid #007bff; padding-bottom: 10px;">
          <h1 style="margin: 0; color: #007bff;">${nome}</h1>
          <h2 style="margin: 5px 0; font-size: 18px; color: #555;">${profissao}</h2>
        </header>
        
        <section style="margin-bottom: 20px;">
          <h3 style="border-bottom: 1px solid #ddd; color: #007bff; padding-bottom: 5px;">Contato</h3>
          <p>Email: ${email}</p>
          <p>Telefone: ${telefone}</p>
          ${endereco ? `<p>Endere√ßo: ${endereco}</p>` : ''}
        </section>
        
        ${resumo ? `
        <section style="margin-bottom: 20px;">
          <h3 style="border-bottom: 1px solid #ddd; color: #007bff; padding-bottom: 5px;">Resumo Profissional</h3>
          <p>${resumo}</p>
        </section>
        ` : ''}
        
        ${experiencias.length > 0 ? `
        <section style="margin-bottom: 20px;">
          <h3 style="border-bottom: 1px solid #ddd; color: #007bff; padding-bottom: 5px;">Experi√™ncia Profissional</h3>
          <ul style="padding-left: 20px;">
            ${experiencias.map(exp => `<li>${exp.trim()}</li>`).join('')}
          </ul>
        </section>
        ` : ''}
        
        ${formacoes.length > 0 ? `
        <section style="margin-bottom: 20px;">
          <h3 style="border-bottom: 1px solid #ddd; color: #007bff; padding-bottom: 5px;">Forma√ß√£o Acad√™mica</h3>
          <ul style="padding-left: 20px;">
            ${formacoes.map(form => `<li>${form.trim()}</li>`).join('')}
          </ul>
        </section>
        ` : ''}
        
        ${cursos.length > 0 ? `
        <section style="margin-bottom: 20px;">
          <h3 style="border-bottom: 1px solid #ddd; color: #007bff; padding-bottom: 5px;">Cursos Complementares</h3>
          <ul style="padding-left: 20px;">
            ${cursos.map(curso => `<li>${curso.trim()}</li>`).join('')}
          </ul>
        </section>
        ` : ''}
        
        ${habilidades.length > 0 ? `
        <section style="margin-bottom: 20px;">
          <h3 style="border-bottom: 1px solid #ddd; color: #007bff; padding-bottom: 5px;">Habilidades</h3>
          <div>
            ${habilidades.map(habilidade => `<span style="display: inline-block; background: #f0f0f0; padding: 5px 10px; margin: 5px; border-radius: 3px;">${habilidade.trim()}</span>`).join('')}
          </div>
        </section>
        ` : ''}
      </div>
    `;

    document.getElementById('curriculoResultado').innerHTML = html;
  }

  // Fun√ß√£o para exportar para PDF (usando a biblioteca html2pdf.js)
  function exportarParaPDF(elementId) {
    const element = document.getElementById(elementId);
    
    // Carrega a biblioteca dinamicamente se n√£o estiver dispon√≠vel
    if (!window.html2pdf) {
      const script = document.createElement('script');
      script.src = 'https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js';
      script.onload = () => gerarPDF(element);
      document.head.appendChild(script);
    } else {
      gerarPDF(element);
    }
    
    function gerarPDF(element) {
      const opt = {
        margin: 10,
        filename: elementId === 'resultado' ? 'rescisao.pdf' : 'curriculo.pdf',
        image: { type: 'jpeg', quality: 0.98 },
        html2canvas: { scale: 2 },
        jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
      };
      
      html2pdf().set(opt).from(element).save();
    }
  }
  </script>
</body>
</html>
